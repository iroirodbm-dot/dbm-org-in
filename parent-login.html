<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Parent Login â€¢ DBM School</title>

  <link rel="icon" href="assets/images/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/nav.css">

  <style>
    :root {
      --primary:#4a6fa5;
      --accent:#d4a373;
      --light:#f8f9fa;
      --gray:#6c757d;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--light);
      padding-top: 52px;
    }

    h1 {
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      text-align: center;
    }

    .login-box {
      max-width: 420px;
      background: white;
      margin: 140px auto;
      padding: 2.5rem;
      border-radius: 14px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    }

    label {
      display: block;
      margin-top: 1.5rem;
      font-weight: 500;
    }

    input {
      width: 100%;
      padding: 0.7rem;
      margin-top: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    button {
      width: 100%;
      margin-top: 2rem;
      padding: 0.8rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 1rem;
      cursor: pointer;
    }

    button:hover {
      background: #3b5f8f;
    }

    .hidden {
      display: none;
    }

    .note {
      text-align: center;
      margin-top: 1.5rem;
      color: var(--gray);
      font-size: 0.9rem;
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav>
  <div class="nav-container container">
    <div class="logo">
      <a href="index.html">
        <img src="assets/images/dbm-logo.png" alt="Deaf Biblical Ministry logo">
      </a>
    </div>

    <div class="nav-links">
      <a href="index.html#about">About</a>
      <a href="impact.html">Impact</a>
      <a href="programs.html">Programs</a>
      <a href="support.html">Support Us</a>
      <a href="contact.html">Contact</a>
    </div>

    <button class="hamburger" aria-label="Open menu">
      <span></span><span></span><span></span>
    </button>
  </div>

  <div class="mobile-menu">
    <a href="index.html#about">About</a>
    <a href="impact.html">Impact</a>
    <a href="programs.html">Programs</a>
    <a href="support.html">Support Us</a>
    <a href="contact.html">Contact</a>
  </div>
</nav>

  <!-- LOGIN BOX -->
  <div class="login-box">
    <h1>Parent Login</h1>

    <!-- PHONE INPUT -->
    <div id="phone-section">
      <label>Mobile Number</label>
      <input type="tel" id="phoneNumber" placeholder="+91XXXXXXXXXX">

      <button onclick="sendOTP()">Send OTP</button>
    </div>

    <!-- OTP INPUT -->
    <div id="otp-section" class="hidden">
      <label>Enter OTP</label>
      <input type="text" id="otp" placeholder="6-digit OTP">

      <button onclick="verifyOTP()">Verify & Login</button>
    </div>

    <!-- Firebase reCAPTCHA -->
    <div id="recaptcha-container"></div>

    <div class="note">
      Secure login using your registered mobile number
    </div>
  </div>

  <script src="assets/js/nav.js" defer></script>
  
  <!-- FIREBASE SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <script>
    // ðŸ” Firebase config (replace with your own)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);

    const auth = firebase.auth();

    // Setup reCAPTCHA
    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
      'recaptcha-container',
      { size: 'invisible' }
    );

    function sendOTP() {
      const phoneNumber = document.getElementById("phoneNumber").value;

      auth.signInWithPhoneNumber(phoneNumber, window.recaptchaVerifier)
        .then(confirmationResult => {
          window.confirmationResult = confirmationResult;
          document.getElementById("phone-section").classList.add("hidden");
          document.getElementById("otp-section").classList.remove("hidden");
          alert("OTP sent successfully");
        })
        .catch(error => {
          alert(error.message);
        });
    }

    function verifyOTP() {
      const otp = document.getElementById("otp").value;

      window.confirmationResult.confirm(otp)
        .then(result => {
          // âœ… Login success
          window.location.href = "parent-dashboard.html";
        })
        .catch(error => {
          alert("Invalid OTP");
        });
    }
  </script>

   
</body>
</html>
